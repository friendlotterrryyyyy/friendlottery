(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class y{static generateCsv(e){const n=Object.keys(e[0]).join(";"),s=e.map(r=>`"${r.combination}";"${r.price}"
`).join("").replaceAll(",",""),t="data:text/csv;charset=utf-8,"+n+`
`+s;window.open(encodeURI(t))}}class o{static validateForm(e){if(!e.isUserPlaying&&e.totalParticipants===0)return document.getElementById("error_players_amount").setAttribute("style","display: block"),!1;if(e.isUserPlaying){if(!e.choosenNumbers.every(s=>s>=1&&s<=28))return console.log(e.choosenNumbers),document.getElementById("error_ticket_number_required").setAttribute("style","display: block"),!1;if(new Set(e.choosenNumbers).size!==e.choosenNumbers.length)return document.getElementById("error_ticket_number_repeated").setAttribute("style","display: block"),!1}return!0}static cleanFormErrors(){document.querySelectorAll("[id^='error_']").forEach(e=>e.setAttribute("style","display: none"))}static cleanChoosenNumbers(){const e=document.querySelectorAll("[id^='ticket-segment']");for(const n of e)n.value=""}static getChoosenNumbers(){return Array.from(document.querySelectorAll("[id^='ticket-segment-']")).map(e=>Number(e.value))}static getIsUserPlaying(){return document.getElementById("user_playing").checked}static getTotalParticipants(){return Number(document.getElementById("total_participants").value)}static getDownloadCSVOption(){return document.getElementById("download_csv_option").checked}static getFormData(){const e=o.getChoosenNumbers(),n=o.getIsUserPlaying(),s=o.getTotalParticipants(),t=o.getDownloadCSVOption();return{choosenNumbers:e,isUserPlaying:n,totalParticipants:s,downloadCSVOption:t}}}class c{static getUniqueRandomNumberInRange(e,n,s=[]){const t=Math.floor(Math.random()*(n+1-e)+e);return s.includes(t)?c.getUniqueRandomNumberInRange(e,n,s):t}static generateFlash(){const e=[];for(let n=0;n<7;n++)e.push(c.getUniqueRandomNumberInRange(1,28,e));return e}static generateFlashTickets(e){return Array.from({length:e},()=>c.generateFlash())}static findRewardInTable(e,n){return[{blue:7,yellow:0,price:25e3},{blue:6,yellow:1,price:600},{blue:5,yellow:2,price:140},{blue:4,yellow:3,price:105},{blue:3,yellow:4,price:100},{blue:2,yellow:5,price:100},{blue:6,yellow:0,price:500},{blue:5,yellow:1,price:55},{blue:4,yellow:2,price:20},{blue:3,yellow:3,price:15},{blue:2,yellow:4,price:15},{blue:1,yellow:5,price:15},{blue:5,yellow:0,price:40},{blue:4,yellow:1,price:8},{blue:3,yellow:2,price:3},{blue:2,yellow:3,price:3},{blue:1,yellow:4,price:3},{blue:0,yellow:5,price:3},{blue:4,yellow:0,price:5},{blue:3,yellow:1,price:2},{blue:2,yellow:2,price:2},{blue:1,yellow:3,price:2},{blue:0,yellow:4,price:2}].find(t=>t.blue===e&&t.yellow===n)}static getWinningNumbers(e){const n=[];for(let t=0;t<=28;t++)n.push({num:t,score:0});for(const t of e)for(const r of t){const i=n.findIndex(l=>l.num===r);n[i].score=n[i].score+1}return n.shift(),n.sort((t,r)=>t.score-r.score),n.slice(0,12).map((t,r)=>({num:t.num,color:r<=6?"blue":"yellow"}))}static getRewards(e,n){const s=[];for(const t of e){let r=0,i=0;for(const a of n)for(const m of t)m===a.num&&(a.color==="blue"?r++:i++);const l=c.findRewardInTable(r,i);s.push({combination:t.join(" "),price:l?`${l.price}`:""})}return s}static getLotteryResults(e){const n={totalCombinationsLength:e.totalParticipants,totalGrossIncome:e.totalParticipants*2},s=c.generateFlashTickets(e.totalParticipants);e.isUserPlaying&&(n.totalCombinationsLength++,n.totalGrossIncome+=2,s.push(e.choosenNumbers));const t=c.getWinningNumbers(s),r=l=>l.color==="blue",i=l=>l.color==="yellow";return n.blueWinningNumbers=t.filter(r),n.yellowWinningNumbers=t.filter(i),n.rewards=c.getRewards(s,t),n.totalFriendPayments=n.rewards.reduce((l,a)=>l+ +a.price,0),n.totalFriendEarnings=n.totalGrossIncome-n.totalFriendPayments,n}}class u{static cleanPage(){o.cleanChoosenNumbers(),o.cleanFormErrors(),u.showForm()}static syncUserInputDisplayWithOptionStatus(){const e=document.getElementById("user_playing");e.checked&&document.getElementById("ticket_input").setAttribute("style","display: block"),e.addEventListener("change",n=>{const s=n.target.checked?"block":"none";document.getElementById("ticket_input").setAttribute("style","display: "+s)})}static addFormSubmitEventListener(){document.getElementById("lottery").addEventListener("submit",e=>{e.preventDefault(),o.cleanFormErrors();const n=o.getFormData();if(!o.validateForm(n))return;const t=c.getLotteryResults(n);u.displayResults(t),n.downloadCSVOption&&y.generateCsv(t.rewards),o.cleanFormErrors(),o.cleanChoosenNumbers(),u.showResults()})}static displayResults(e){const n=e.blueWinningNumbers.map(t=>t.num).join(" "),s=e.yellowWinningNumbers.map(t=>t.num).join(" ");document.getElementById("results-blueWinningNumbers").innerText=n,document.getElementById("results-yellowWinningNumbers").innerText=s,document.getElementById("results-totalCombinationsLength").innerText=e.totalCombinationsLength.toString(),document.getElementById("results-totalGrossIncome").innerText=e.totalGrossIncome.toString()+"€",document.getElementById("results-totalFriendPayments").innerText=e.totalFriendPayments.toString()+"€",document.getElementById("results-totalFriendEarnings").innerText=e.totalFriendEarnings.toString()+"€"}static addPlayAgainButtonEventListener(){document.getElementById("play-again-btn").addEventListener("click",()=>{u.showForm()})}static showForm(){document.getElementById("lottery").setAttribute("style","display: block"),document.getElementById("results").setAttribute("style","display: none")}static showResults(){document.getElementById("results").setAttribute("style","display: block"),document.getElementById("lottery").setAttribute("style","display: none")}}u.cleanPage();u.syncUserInputDisplayWithOptionStatus();u.addFormSubmitEventListener();u.addPlayAgainButtonEventListener();
